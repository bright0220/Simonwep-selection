/*! Selection 0.0.1 - MIT | git://github.com/Simonwep/Selection.git */

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,b){a!=Array.prototype&&a!=Object.prototype&&(a[d]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(d){return $jscomp.SYMBOL_PREFIX+(d||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var d=0;return $jscomp.iteratorPrototype(function(){return d<a.length?{done:!1,value:a[d++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var d=a[Symbol.iterator];return d?d.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var d,b=[];!(d=a.next()).done;)b.push(d.value);return b};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.findInternal=function(a,d,b){a instanceof String&&(a=String(a));for(var f=a.length,g=0;g<f;g++){var l=a[g];if(d.call(b,l,g,a))return{i:g,v:l}}return{i:-1,v:void 0}};$jscomp.polyfill=function(a,d,b,f){if(d){b=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var g=a[f];g in b||(b[g]={});b=b[g]}a=a[a.length-1];f=b[a];d=d(f);d!=f&&null!=d&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:d})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,b){var d=this;d instanceof String&&(d=String(d));var g=d.length;for(b=b||0;b<g;b++)if(d[b]==a||Object.is(d[b],a))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,d,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");
(function(a){if("undefined"!=typeof module&&"undefined"!=typeof module.exports)module.exports=a();else if("undefined"!==typeof window&&window.document)window.Selection=a();else throw Error("selection.js requires a window with a document");})(function(){function a(c){this.options=c?c:{};var a={class:"selection-area",startThreshold:0,disableTouch:!1,containers:[],selectables:[],startareas:["html"],boundarys:["html"]},e;for(e in a)e in c||(c[e]=a[e]);for(var b in this)"_"===b.charAt(0)&&"function"===
typeof this[b]&&(this[b]=this[b].bind(this));c=document.createElement("div");document.body.appendChild(c);f(c,{top:0,left:0,position:"fixed"});this.areaElement=c;d(document,"mousedown",this._onTapStart);this.options.disableTouch||d(document,"touchstart",this._onTapStart)}function d(c,a,e){c.addEventListener(a,e,!1)}function b(c,a,e){c.removeEventListener(a,e,!1)}function f(c,a,e){var k=c&&c.style;if(k)if("object"===typeof a)for(e=Object.getOwnPropertyNames(a),e=$jscomp.makeIterator(e),c=e.next();!c.done;c=
e.next()){c=c.value;var b=a[c];k[c]=b+("string"===typeof b?"":"px")}else{if(void 0===e)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(c,null):c.currentStyle&&(e=c.currentStyle),void 0===prop?e:e[a];if(a in k)k[a]=e+("string"===typeof e?"":"px");else for(c=$jscomp.makeIterator(t),b=c.next();!b.done;b=c.next())k[b.value+a]=e+("string"===typeof e?"":"px")}}function g(a,k){function c(a){a=$jscomp.makeIterator(a.children);for(var b=a.next();!b.done;b=
a.next())b=b.value,k(b),c(b,k)}Array.isArray(a)||(a=[a]);a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())c(b.value)}function l(a,b){a=a.getBoundingClientRect();b=b.getBoundingClientRect();return a.x+a.width>=b.x&&a.x<=b.x+b.width&&a.y+a.height>=b.y&&a.y<=b.y+b.height}function p(a,b,e){var c=a.options[b];if("function"===typeof c)return c.call(a,{selection:a,eventName:b,element:e})}function m(a,b,e,d,f,g){var c=a.options[b];if("function"===typeof c)return c.call(a,{selection:a,eventName:b,
areaElement:e,selectedElements:f,changedElements:g,originalEvent:d})}function h(a){Array.isArray(a)||(a=[a]);var b=[];a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())b.push.apply(b,[].concat($jscomp.arrayFromIterable(document.querySelectorAll(c.value))));return b}function n(a){var b=[];for(a=a.target;a=a.parentElement;)b.push(a);b.push(document);b.push(window);return b}var t=["-moz-","-ms-","-o-","-webkit-"],u=Math.abs,q=Math.max,r=Math.min;a.prototype={constructor:a,_onTapStart:function(a){var b=
a.touches&&a.touches[0],c=(b||a).target,f=h(this.options.startareas);this._boundarys=h(this.options.boundarys);!1!==p(this,"startFilter",c)&&f.find(function(b){return n(a).includes(b)})&&this._boundarys.find(function(b){return n(a).includes(b)})&&(this._lastX=(b||a).clientX,this._lastY=(b||a).clientY,this._containers=h(this.options.containers),this._selectables=h(this.options.selectables),this._targetBoundary=this._boundarys.find(function(a){return l(a,c)}),this._touchedElements=[],this._changedElements=
{added:[],removed:[]},this.areaElement.classList.add(this.options.class),d(document,"mousemove",this._delayedTapMove),d(document,"touchmove",this._delayedTapMove),d(document,"mouseup",this._onTapStop),d(document,"touchcancel",this._onTapStop),d(document,"touchend",this._onTapStop),m(this,"onStart",this.areaElement,a,this._touchedElements,this._changedElements))},_delayedTapMove:function(a){var c=a.touches&&a.touches[0];u((c||a).clientX+(c||a).clientY-(this._lastX+this._lastY))>=this.options.startThreshold&&
(b(document,"mousemove",this._delayedTapMove),b(document,"touchmove",this._delayedTapMove),d(document,"mousemove",this._onTapMove),d(document,"touchmove",this._onTapMove),f(this.areaElement,"display","block"))},_onTapMove:function(a){var b=this._targetBoundary.getBoundingClientRect(),c=a.touches&&a.touches[0],d=(c||a).clientX;c=(c||a).clientY;d<b.x&&(d=b.x);c<b.y&&(c=b.y);d>b.x+b.width&&(d=b.x+b.width);c>b.y+b.height&&(c=b.y+b.height);b=r(this._lastX,d);var g=r(this._lastY,c);d=q(this._lastX,d);c=
q(this._lastY,c);f(this.areaElement,{top:g,left:b,width:d-b,height:c-g});this._updatedTouchingElements();m(this,"onMove",this.areaElement,a,this._touchedElements,this._changedElements)},_onTapStop:function(a,d){f(this.areaElement,"display","none");b(document,"mousemove",this._delayedTapMove);b(document,"touchmove",this._delayedTapMove);b(document,"mousemove",this._onTapMove);b(document,"touchmove",this._onTapMove);b(document,"mouseup",this._onTapStop);b(document,"touchcancel",this._onTapStop);b(document,
"touchend",this._onTapStop);d||(this._updatedTouchingElements(),m(this,"onStop",this.areaElement,a,this._touchedElements,this._changedElements))},_updatedTouchingElements:function(){var a=this,b=[],d={added:[],removed:[]},f=function(c){!1!==p(a,"selectionFilter",c)&&l(a.areaElement,c)&&(a._touchedElements.includes(c)||d.added.push(c),b.push(c))}.bind(this);g(this._containers,f);this._selectables.forEach(f);f=this._touchedElements;for(var h=f.length-1;0<=h;h--){var m=f[h];b.includes(m)||d.removed.push(m)}this._touchedElements=
b;this._changedElements=d},cancel:function(a){this._onTapStop(null,!a)},option:function(a,b){var c=this.options;return void 0===b?c[a]:c[a]=b},disable:function(){b(document,"mousedown",this._onTapStart)},enable:function(){d(document,"mousedown",this._onTapStart)}};a.utils={on:d,off:b,css:f,intersects:l,traverseNode:g,selectAll:h,eventPath:n};a.create=function(b){return new a(b)};a.version="0.0.1";return a});
