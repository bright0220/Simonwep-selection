/*! Selection 0.0.1 - MIT | git://github.com/Simonwep/Selection.git */

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var c=0;return $jscomp.iteratorPrototype(function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var c=a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var c,b=[];!(c=a.next()).done;)b.push(c.value);return b};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.findInternal=function(a,c,b){a instanceof String&&(a=String(a));for(var f=a.length,g=0;g<f;g++){var l=a[g];if(c.call(b,l,g,a))return{i:g,v:l}}return{i:-1,v:void 0}};$jscomp.polyfill=function(a,c,b,f){if(c){b=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var g=a[f];g in b||(b[g]={});b=b[g]}a=a[a.length-1];f=b[a];c=c(f);c!=f&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,b){var c=this;c instanceof String&&(c=String(c));var g=c.length;for(b=b||0;b<g;b++)if(c[b]==a||Object.is(c[b],a))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");
(function(a){if("undefined"!=typeof module&&"undefined"!=typeof module.exports)module.exports=a();else if("undefined"!==typeof window&&window.document)window.Selection=a();else throw Error("selection.js requires a window with a document");})(function(){function a(d){this.options=d?d:{};var a={class:"selection-area",startThreshold:0,disableTouch:!1,containers:[],selectables:[],startareas:["html"],boundarys:["html"]},e;for(e in a)e in d||(d[e]=a[e]);for(var b in this)"_"===b.charAt(0)&&"function"===
typeof this[b]&&(this[b]=this[b].bind(this));d=document.createElement("div");document.body.appendChild(d);f(d,{top:0,left:0,position:"fixed"});this.areaElement=d;c(document,"mousedown",this._onTapStart);this.options.disableTouch||c(document,"touchstart",this._onTapStart)}function c(d,a,e){d.addEventListener(a,e,!1)}function b(a,h,e){a.removeEventListener(h,e,!1)}function f(a,h,e){var d=a&&a.style;if(d)if("object"===typeof h)for(e=Object.getOwnPropertyNames(h),e=$jscomp.makeIterator(e),a=e.next();!a.done;a=
e.next()){a=a.value;var b=h[a];d[a]=b+("string"===typeof b?"":"px")}else{if(void 0===e)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(a,null):a.currentStyle&&(e=a.currentStyle),void 0===prop?e:e[h];if(h in d)d[h]=e+("string"===typeof e?"":"px");else for(a=$jscomp.makeIterator(r),b=a.next();!b.done;b=a.next())d[b.value+h]=e+("string"===typeof e?"":"px")}}function g(a,h){function d(a){a=$jscomp.makeIterator(a.children);for(var b=a.next();!b.done;b=
a.next())b=b.value,h(b),d(b,h)}Array.isArray(a)||(a=[a]);a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())d(b.value)}function l(a,b){a=a.getBoundingClientRect();b=b.getBoundingClientRect();return a.x+a.width>=b.x&&a.x<=b.x+b.width&&a.y+a.height>=b.y&&a.y<=b.y+b.height}function n(a,b,e){var d=a.options[b];if("function"===typeof d)return d.call(a,{selection:a,eventName:b,element:e})}function m(a,b,e,c,f,g){var d=a.options[b];if("function"===typeof d)return d.call(a,{selection:a,eventName:b,
areaElement:e,selectedElements:f,changedElements:g,originalEvent:c})}function k(a){Array.isArray(a)||(a=[a]);var b=[];a=$jscomp.makeIterator(a);for(var d=a.next();!d.done;d=a.next())b.push.apply(b,[].concat($jscomp.arrayFromIterable(document.querySelectorAll(d.value))));return b}var r=["-moz-","-ms-","-o-","-webkit-"],t=Math.abs,p=Math.max,q=Math.min;a.prototype={constructor:a,_onTapStart:function(a){var b=a.touches&&a.touches[0],d=(b||a).target,f=k(this.options.startareas);this._boundarys=k(this.options.boundarys);
!1!==n(this,"startFilter",d)&&f.find(function(b){return a.path.includes(b)})&&this._boundarys.find(function(b){return a.path.includes(b)})&&(this._containers=k(this.options.containers),this._selectables=k(this.options.selectables),this._targetBoundary=this._boundarys.find(function(a){return l(a,d)}),this._touchedElements=[],this._changedElements={added:[],removed:[]},this._lastX=(b||a).clientX,this._lastY=(b||a).clientY,this.areaElement.classList.add(this.options.class),c(document,"mousemove",this._delayedTapMove),
c(document,"touchmove",this._delayedTapMove),c(document,"mouseup",this._onTapStop),c(document,"touchcancel",this._onTapStop),c(document,"touchend",this._onTapStop),m(this,"onStart",this.areaElement,a,this._touchedElements,this._changedElements))},_delayedTapMove:function(a){var d=a.touches&&a.touches[0];t((d||a).clientX+(d||a).clientY-(this._lastX+this._lastY))>=this.options.startThreshold&&(b(document,"mousemove",this._delayedTapMove),b(document,"touchmove",this._delayedTapMove),c(document,"mousemove",
this._onTapMove),c(document,"touchmove",this._onTapMove),f(this.areaElement,"display","block"))},_onTapMove:function(a){var b=this._targetBoundary.getBoundingClientRect(),d=a.touches&&a.touches[0],c=(d||a).clientX;d=(d||a).clientY;c<b.x&&(c=b.x);d<b.y&&(d=b.y);c>b.x+b.width&&(c=b.x+b.width);d>b.y+b.height&&(d=b.y+b.height);b=q(this._lastX,c);var g=q(this._lastY,d);c=p(this._lastX,c);d=p(this._lastY,d);f(this.areaElement,{top:g,left:b,width:c-b,height:d-g});this._updatedTouchingElements();m(this,"onMove",
this.areaElement,a,this._touchedElements,this._changedElements)},_onTapStop:function(a,c){f(this.areaElement,"display","none");b(document,"mousemove",this._delayedTapMove);b(document,"touchmove",this._delayedTapMove);b(document,"mousemove",this._onTapMove);b(document,"touchmove",this._onTapMove);b(document,"mouseup",this._onTapStop);b(document,"touchcancel",this._onTapStop);b(document,"touchend",this._onTapStop);c||(this._updatedTouchingElements(),m(this,"onStop",this.areaElement,a,this._touchedElements,
this._changedElements))},_updatedTouchingElements:function(){var a=this,b=[],c={added:[],removed:[]},f=function(d){!1!==n(a,"selectionFilter",d)&&l(a.areaElement,d)&&(a._touchedElements.includes(d)||c.added.push(d),b.push(d))}.bind(this);g(this._containers,f);this._selectables.forEach(f);f=this._touchedElements;for(var k=f.length-1;0<=k;k--){var m=f[k];b.includes(m)||c.removed.push(m)}this._touchedElements=b;this._changedElements=c},cancel:function(a){this._onTapStop(null,!a)},option:function(a,b){var c=
this.options;return void 0===b?c[a]:c[a]=b},disable:function(){b(document,"mousedown",this._onTapStart)},enable:function(){c(document,"mousedown",this._onTapStart)}};a.utils={on:c,off:b,css:f,intersects:l,traverseNode:g,selectAll:k};a.create=function(b){return new a(b)};a.version="0.0.1";return a});
