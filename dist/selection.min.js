!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Selection=t():e.Selection=t()}(window,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="dist/",n(n.s=0)}([function(e,t,n){"use strict";var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1));var a=Math.abs,l=Math.max,i=Math.min,c=document,u=function(e){return e.preventDefault()};function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={options:Object.assign({class:"selection-area",mode:"touch",startThreshold:10,singleClick:!0,disableTouch:!1,containers:[],selectables:[],startareas:["html"],boundaries:["html"]},e),_selectedStore:[],_areaElement:r.createElement("div",c.body),_init:function(){r.css(t._areaElement,{top:0,left:0,position:"fixed"}),r.on(c,"mousedown",t._onTapStart),t.options.disableTouch||r.on(c,"touchstart",t._onTapStart,{passive:!1})},_onTapStart:function(e){var n=e.touches&&e.touches[0],o=(n||e).target,a=r.selectAll(t.options.startareas);t._boundaries=r.selectAll(t.options.boundaries);var l=r.eventPath(e);if(a.find(function(e){return l.includes(e)})&&t._boundaries.find(function(e){return l.includes(e)})){t._lastX=(n||e).clientX,t._lastY=(n||e).clientY,t._singleClick=!0;var i=r.selectAll(t.options.containers);t._selectables=r.selectAll(t.options.selectables),i.forEach(function(e){var n;return(n=t._selectables).push.apply(n,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e.getElementsByTagName("*")))}),t._targetBoundary=t._boundaries.find(function(e){return r.intersects(e,o)}).getBoundingClientRect(),t._touchedElements=[],t._changedElements={added:[],removed:[]},t._areaElement.classList.add(t.options.class),r.on(c,"selectstart",u),r.on(c,"mousemove",t._delayedTapMove),r.on(c,"touchmove",t._delayedTapMove,{passive:!1}),r.on(c,["mouseup","touchcancel","touchend"],t._onTapStop),e.preventDefault()}},_onSingleTap:function(e){var n=(e.touches&&e.touches[0]||e).target;if(t._selectables.includes(n)){t._touchedElements.push(n);var o=t._selectedStore,r=t._changedElements;t._dispatchEvent("onSelect",t._areaElement,e,o,r,{target:n})}},_delayedTapMove:function(e){var n=e.touches&&e.touches[0],o=(n||e).clientX,l=(n||e).clientY;if(a(o+l-(t._lastX+t._lastY))>=t.options.startThreshold){r.off(c,["mousemove","touchmove"],t._delayedTapMove),r.on(c,["mousemove","touchmove"],t._onTapMove),r.css(t._areaElement,"display","block"),t._updateArea(e);var i=t._touchedElements.concat(t._selectedStore),u=t._changedElements;t._dispatchEvent("onStart",t._areaElement,e,i,u),t._singleClick=!1}},_onTapMove:function(e){t._updateArea(e),t._updatedTouchingElements();var n=t._touchedElements.concat(t._selectedStore),o=t._changedElements;t._dispatchEvent("onMove",t._areaElement,e,n,o)},_updateArea:function(e){var n=t._targetBoundary,o=e.touches&&e.touches[0],a=(o||e).clientX,c=(o||e).clientY;a<n.left&&(a=n.left),c<n.top&&(c=n.top),a>n.left+n.width&&(a=n.left+n.width),c>n.top+n.height&&(c=n.top+n.height);var u=i(t._lastX,a),s=i(t._lastY,c),f=l(t._lastX,a),d=l(t._lastY,c);r.css(t._areaElement,{top:s,left:u,width:f-u,height:d-s})},_onTapStop:function(e,n){if(r.off(c,["mousemove","touchmove"],t._delayedTapMove),r.off(c,["touchmove","mousemove"],t._onTapMove),r.off(c,["mouseup","touchcancel","touchend"],t._onTapStop),t._singleClick)t._onSingleTap(e);else if(!n){t._updatedTouchingElements();var o=t._touchedElements.concat(t._selectedStore),a=t._changedElements;t._dispatchEvent("onStop",t._areaElement,e,o,a)}r.off(c,"selectstart",u),r.css(t._areaElement,"display","none")},_updatedTouchingElements:function(){for(var e=[],n={added:[],removed:[]},o=0,a=t._selectables.length;o<a;o++){var l=t._selectables[o];r.intersects(t._areaElement,l,t.options.mode)&&!1!==t._dispatchFilterEvent("selectionFilter",l)&&(t._touchedElements.includes(l)||n.added.push(l),e.push(l))}n.removed=t._touchedElements.filter(function(t){return!e.includes(t)}),t._touchedElements=e,t._changedElements=n},_dispatchFilterEvent:function(e,n){var o=t.options[e];if("function"==typeof o)return o.call(t,{selection:t,eventName:e,element:n})},_dispatchEvent:function(e,n,r,a,l,i){var c=t.options[e];if("function"==typeof c)return c.call(t,o({selection:t,eventName:e,areaElement:n,selectedElements:a,changedElements:l,originalEvent:r},i))},keepSelection:function(){var e=t._touchedElements.filter(function(e){return!t._selectedStore.includes(e)});t._selectedStore=e.concat(t._selectedStore)},clearSelection:function(){t._selectedStore=[]},removeFromSelection:function(e){r.removeElement(t._selectedStore,e),r.removeElement(t._touchedElements,e)},cancel:function(e){t._onTapStop(null,!e)},option:function(e,n){var o=t.options;return null==n?o[e]:o[e]=n},disable:function(){r.off(c,"mousedown",t._onTapStart)},enable:function(){r.on(c,"mousedown",t._onTapStart)}};return t._init(),t}s.utils={on:r.on,off:r.off,css:r.css,intersects:r.intersects,selectAll:r.selectAll,eventPath:r.eventPath,removeElement:r.removeElement},s.create=function(e){return new s(e)},s.version="0.1.1",e.exports=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function l(e,t,n,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};t instanceof HTMLCollection||t instanceof NodeList?t=Array.from(t):Array.isArray(t)||(t=[t]),Array.isArray(n)||(n=[n]);var l=!0,i=!1,c=void 0;try{for(var u,s=t[Symbol.iterator]();!(l=(u=s.next()).done);l=!0){var f=u.value,d=!0,p=!1,v=void 0;try{for(var m,h=n[Symbol.iterator]();!(d=(m=h.next()).done);d=!0){var _=m.value;f[e](_,o,r({capture:!1},a))}}catch(e){p=!0,v=e}finally{try{!d&&h.return&&h.return()}finally{if(p)throw v}}}}catch(e){i=!0,c=e}finally{try{!l&&s.return&&s.return()}finally{if(i)throw c}}return Array.prototype.slice.call(arguments,1)}t.css=function(e,t,n){var r=e&&e.style;if(!r)return;if("object"===(void 0===t?"undefined":o(t)))for(var a in t){var l=t[a];r[a]=i(l)}else{if(null==n){var c=document.defaultView;return c&&c.getComputedStyle?n=c.getComputedStyle(e,null):e.currentStyle&&(n=e.currentStyle),null==t?n:n[t]}r[t]=i(n)}},t.intersects=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"touch",o=e.getBoundingClientRect(),r=t.getBoundingClientRect();if("center"===n){var a=r.left+r.width/2,l=r.top+r.height/2;return a>=o.left&&a<=o.right&&l>=o.top&&l<=o.bottom}if("cover"===n)return r.left>=o.left&&r.top>=o.top&&r.right<=o.right&&r.bottom<=o.bottom;if("touch"===n)return o.right>=r.left&&o.left<=r.right&&o.bottom>=r.top&&o.top<=r.bottom},t.selectAll=function(e){Array.isArray(e)||(e=[e]);var t=[],n=!0,o=!1,r=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){var c=l.value;t.push.apply(t,a(document.querySelectorAll(c)))}}catch(e){o=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(o)throw r}}return t},t.eventPath=function(e){var t=e.path||e.composedPath&&e.composedPath();if(t)return t;var n=e.target.parentElement;t=[e.target,n];for(;n=n.parentElement;)t.push(n);return t.push(document,window),t},t.removeElement=function(e,t){var n=e.indexOf(t);~n&&e.splice(n,1)},t.createElement=function(e,t){var n=document.createElement(e);t instanceof Element&&t.appendChild(n);return n};t.on=l.bind(null,"addEventListener"),t.off=l.bind(null,"removeEventListener");var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px";return"number"==typeof e?e+t:""+e}}])});