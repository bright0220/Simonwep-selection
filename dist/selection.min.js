!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Selection=t():e.Selection=t()}(window,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="dist/",n(n.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.on=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.addEventListener(t,n,i({capture:s},o))},t.off=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.removeEventListener(t,n,i({capture:s},o))},t.css=function(e,t,n){var i=e&&e.style;if(i)if("object"===(void 0===t?"undefined":o(t))){var r=Object.getOwnPropertyNames(t),s=!0,c=!1,l=void 0;try{for(var u,h=r[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){var d=u.value,f=t[d];i[d]=f+("string"==typeof f?"":"px")}}catch(e){c=!0,l=e}finally{try{!s&&h.return&&h.return()}finally{if(c)throw l}}}else{if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,null):e.currentStyle&&(n=e.currentStyle),void 0===prop?n:n[t];if(t in i)i[t]=n+("string"==typeof n?"":"px");else{var p=!0,m=!1,v=void 0;try{for(var _,y=a[Symbol.iterator]();!(p=(_=y.next()).done);p=!0){var g=_.value;i[g+t]=n+("string"==typeof n?"":"px")}}catch(e){m=!0,v=e}finally{try{!p&&y.return&&y.return()}finally{if(m)throw v}}}}},t.intersects=function(e,t){var n=e.getBoundingClientRect(),o=t.getBoundingClientRect();return n.left+n.width>=o.left&&n.left<=o.left+o.width&&n.top+n.height>=o.top&&n.top<=o.top+o.height},t.selectAll=function(e){Array.isArray(e)||(e=[e]);var t=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var c=s.value;t.push.apply(t,r(document.querySelectorAll(c)))}}catch(e){o=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}return t},t.eventPath=function(e){var t=e.path||e.composedPath&&e.composedPath();if(t)return t;var n=e.target.parentElement;for(t=[e.target];n;n=n.parentElement)t.push(n);return t.push(document,window),t},t.removeElement=function(e,t){var n=e.indexOf(t);~n&&e.splice(n,1)};var s=!1,a=["-moz-","-ms-","-o-","-webkit-"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispatchFilterEvent=function(e,t,n){var o=e.options[t];if("function"==typeof o){var i={selection:e,eventName:t,element:n};return o.call(e,i)}},t.dispatchEvent=function(e,t,n,o,i,r){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},a=e.options[t];if("function"==typeof a){var c={selection:e,eventName:t,areaElement:n,selectedElements:i,changedElements:r,originalEvent:o};for(var l in s)c[l]=s[l];return a.call(e,c)}}},function(e,t,n){"use strict";var o=r(n(1)),i=r(n(0));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var s=Math.abs,a=Math.max,c=Math.min,l=function(e){return e.preventDefault()};function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in this.options=Object.assign({class:"selection-area",startThreshold:10,singleClick:!0,disableTouch:!1,containers:[],selectables:[],startareas:["html"],boundaries:["html"]},e),this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this));this._selectedStore=[],this.areaElement=document.createElement("div"),document.body.appendChild(this.areaElement),i.css(this.areaElement,{top:0,left:0,position:"fixed"}),i.on(document,"mousedown",this._onTapStart),this.options.disableTouch||i.on(document,"touchstart",this._onTapStart,{passive:!1})}u.prototype={constructor:u,_onTapStart:function(e){var t=this,n=e.touches&&e.touches[0],o=(n||e).target,r=i.selectAll(this.options.startareas);this._boundaries=i.selectAll(this.options.boundaries);var s=i.eventPath(e);if(r.find(function(e){return s.includes(e)})&&this._boundaries.find(function(e){return s.includes(e)})){this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,this._singleClick=!0;var a=i.selectAll(this.options.containers);this._selectables=i.selectAll(this.options.selectables),a.forEach(function(e){var n;return(n=t._selectables).push.apply(n,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e.getElementsByTagName("*")))}),this._targetBoundary=this._boundaries.find(function(e){return i.intersects(e,o)}).getBoundingClientRect(),this._touchedElements=[],this._changedElements={added:[],removed:[]},this.areaElement.classList.add(this.options.class),document.addEventListener("selectstart",l),i.on(document,"mousemove",this._delayedTapMove),i.on(document,"touchmove",this._delayedTapMove,{passive:!1}),i.on(document,"mouseup",this._onTapStop),i.on(document,"touchcancel",this._onTapStop),i.on(document,"touchend",this._onTapStop),e.preventDefault()}},_onSingleTap:function(e){var t=(e.touches&&e.touches[0]||e).target;if(this._selectables.includes(t)){this._touchedElements.push(t);var n=this._selectedStore,i=this._changedElements;o.dispatchEvent(this,"onSelect",this.areaElement,e,n,i,{target:t})}},_delayedTapMove:function(e){var t=e.touches&&e.touches[0],n=(t||e).clientX,r=(t||e).clientY;if(s(n+r-(this._lastX+this._lastY))>=this.options.startThreshold){i.off(document,"mousemove",this._delayedTapMove),i.off(document,"touchmove",this._delayedTapMove),i.on(document,"mousemove",this._onTapMove),i.on(document,"touchmove",this._onTapMove),i.css(this.areaElement,"display","block"),this._updateArea(e);var a=this._touchedElements.concat(this._selectedStore),c=this._changedElements;o.dispatchEvent(this,"onStart",this.areaElement,e,a,c),this._singleClick=!1}},_onTapMove:function(e){this._updateArea(e),this._updatedTouchingElements();var t=this._touchedElements.concat(this._selectedStore),n=this._changedElements;o.dispatchEvent(this,"onMove",this.areaElement,e,t,n)},_updateArea:function(e){var t=this._targetBoundary,n=e.touches&&e.touches[0],o=(n||e).clientX,r=(n||e).clientY;o<t.left&&(o=t.left),r<t.top&&(r=t.top),o>t.left+t.width&&(o=t.left+t.width),r>t.top+t.height&&(r=t.top+t.height);var s=c(this._lastX,o),l=c(this._lastY,r),u=a(this._lastX,o),h=a(this._lastY,r);i.css(this.areaElement,{top:l,left:s,width:u-s,height:h-l})},_onTapStop:function(e,t){if(i.off(document,"mousemove",this._delayedTapMove),i.off(document,"touchmove",this._delayedTapMove),i.off(document,"mousemove",this._onTapMove),i.off(document,"touchmove",this._onTapMove),i.off(document,"mouseup",this._onTapStop),i.off(document,"touchcancel",this._onTapStop),i.off(document,"touchend",this._onTapStop),this._singleClick)this._onSingleTap(e);else if(!t){this._updatedTouchingElements();var n=this._touchedElements.concat(this._selectedStore),r=this._changedElements;o.dispatchEvent(this,"onStop",this.areaElement,e,n,r)}document.removeEventListener("selectstart",l),i.css(this.areaElement,"display","none")},_updatedTouchingElements:function(){var e=this,t=[],n={added:[],removed:[]};this._selectables.forEach(function(r){!1!==o.dispatchFilterEvent(e,"selectionFilter",r)&&i.intersects(e.areaElement,r)&&(e._touchedElements.includes(r)||n.added.push(r),t.push(r))}),n.removed=this._touchedElements.filter(function(e){return!t.includes(e)}),this._touchedElements=t,this._changedElements=n},keepSelection:function(){var e=this,t=this._touchedElements.filter(function(t){return!e._selectedStore.includes(t)});this._selectedStore=t.concat(this._selectedStore)},clearSelection:function(){this._selectedStore=[]},removeFromSelection:function(e){i.removeElement(this._selectedStore,e),i.removeElement(this._touchedElements,e)},cancel:function(e){this._onTapStop(null,!e)},option:function(e,t){var n=this.options;return void 0===t?n[e]:n[e]=t},disable:function(){i.off(document,"mousedown",this._onTapStart)},enable:function(){i.on(document,"mousedown",this._onTapStart)}},u.utils={on:i.on,off:i.off,css:i.css,intersects:i.intersects,selectAll:i.selectAll,eventPath:i.eventPath,removeElement:i.removeElement},u.create=function(e){return new u(e)},u.version="0.0.11",e.exports=u}])});