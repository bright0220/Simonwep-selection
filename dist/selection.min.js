!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Selection=t():e.Selection=t()}(window,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.e)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.e?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="dist/",n(n.s=0)}([function(e,t,n){var o,r,i;r=[n(1)],void 0===(i="function"==typeof(o=function(t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t=function(e){if(e&&e.e)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}(t);var o=Math.abs,r=Math.max,i=Math.min,l=document,a=e=>e.preventDefault();function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c={options:Object.assign({class:"selection-area",mode:"touch",startThreshold:10,singleClick:!0,disableTouch:!1,validateStart:()=>!0,containers:[],selectables:[],startareas:["html"],boundaries:["html"]},e),u:[],a:l.createElement("div"),f(){l.body.appendChild(c.a),t.css(c.a,{top:0,left:0,position:"fixed"}),t.on(l,"mousedown",c.v),c.options.disableTouch||t.on(l,"touchstart",c.v,{passive:!1})},v(e){var n=t.simplifyEvent(e),o=n.x,r=n.y,i=n.target;if(c.options.validateStart(e)){var u=t.selectAll(c.options.startareas);c.b=t.selectAll(c.options.boundaries);var s=t.eventPath(e);if(u.find(e=>s.includes(e))&&c.b.find(e=>s.includes(e))){c.h=o,c.j=r,c.O=!0;var f=t.selectAll(c.options.containers);c.S=t.selectAll(c.options.selectables),f.forEach(e=>c.S.push(...e.getElementsByTagName("*"))),c._=c.b.find(e=>t.intersects(e,i)).getBoundingClientRect(),c.w=[],c.g={added:[],removed:[]},c.a.classList.add(c.options.class),t.on(l,"selectstart",a),t.on(l,"mousemove",c.M),t.on(l,"touchmove",c.M,{passive:!1}),t.on(l,["mouseup","touchcancel","touchend"],c.T),e.preventDefault()}}},A(e){var n=t.simplifyEvent(e).target;c.S.includes(n)&&(c.w.push(n),c.L("onSelect",e,{target:n}))},M(e){var n=t.simplifyEvent(e),r=n.x,i=n.y;o(r+i-(c.h+c.j))>=c.options.startThreshold&&(t.off(l,["mousemove","touchmove"],c.M),t.on(l,["mousemove","touchmove"],c.k),t.css(c.a,"display","block"),c.F(e),c.L("onStart",e),c.O=!1)},k(e){c.F(e),c.N(),c.L("onMove",e)},F(e){var n=c._,o=t.simplifyEvent(e),l=o.x,a=o.y;l<n.left&&(l=n.left),a<n.top&&(a=n.top),l>n.left+n.width&&(l=n.left+n.width),a>n.top+n.height&&(a=n.top+n.height);var u=i(c.h,l),s=i(c.j,a),f=r(c.h,l),p=r(c.j,a);t.css(c.a,{top:s,left:u,width:f-u,height:p-s})},T(e,n){t.off(l,["mousemove","touchmove"],c.M),t.off(l,["touchmove","mousemove"],c.k),t.off(l,["mouseup","touchcancel","touchend"],c.T),c.O?c.A(e):n||(c.N(),c.L("onStop",e)),t.off(l,"selectstart",a),t.css(c.a,"display","none")},N(){for(var e=[],n={added:[],removed:[]},o=0,r=c.S.length;o<r;o++){var i=c.S[o];t.intersects(c.a,i,c.options.mode)&&!1!==c.C("selectionFilter",i)&&(c.w.includes(i)||n.added.push(i),e.push(i))}n.removed=c.w.filter(t=>!e.includes(t)),c.w=e,c.g=n},C(e,t){var n=c.options[e];if("function"==typeof n)return n.call(c,{selection:c,eventName:e,element:t})},L(e,t,o){var r=c.options[e];if("function"==typeof r)return r.call(c,function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),r.forEach(function(t){n(e,t,o[t])})}return e}({selection:c,areaElement:c.a,selectedElements:c.w.concat(c.u),changedElements:c.g,eventName:e,originalEvent:t},o))},keepSelection(){var e=c.w.filter(e=>!c.u.includes(e));c.u=e.concat(c.u)},clearSelection(){c.u=[]},removeFromSelection(e){t.removeElement(c.u,e),t.removeElement(c.w,e)},getSelection:()=>c.u,cancel(e){c.T(null,!e)},option(e,t){var n=c.options;return null==t?n[e]:n[e]=t},disable(){t.off(l,"mousedown",c.v)},enable(){t.on(l,"mousedown",c.v)}};return c.f(),c}c.utils={on:t.on,off:t.off,css:t.css,intersects:t.intersects,selectAll:t.selectAll,eventPath:t.eventPath,removeElement:t.removeElement},c.create=(e=>new c(e)),c.version="0.1.2",e.exports=c})?o.apply(t,r):o)||(e.exports=i)},function(e,t,n){var o,r;void 0===(r="function"==typeof(o=function(e){"use strict";function t(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),r.forEach(function(t){n(e,t,o[t])})}return e}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,n,o,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};n instanceof HTMLCollection||n instanceof NodeList?n=Array.from(n):Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);var l=!0,a=!1,c=void 0;try{for(var u,s=n[Symbol.iterator]();!(l=(u=s.next()).done);l=!0){var f=u.value,p=!0,v=!1,d=void 0;try{for(var m,y=o[Symbol.iterator]();!(p=(m=y.next()).done);p=!0){var h=m.value;f[e](h,r,t({capture:!1},i))}}catch(e){v=!0,d=e}finally{try{p||null==y.return||y.return()}finally{if(v)throw d}}}}catch(e){a=!0,c=e}finally{try{l||null==s.return||s.return()}finally{if(a)throw c}}return Array.prototype.slice.call(arguments,1)}Object.defineProperty(e,"__esModule",{value:!0}),e.css=function(e,t,n){var o=e&&e.style;if(o)if("object"==typeof t)for(var r in t)o[r]=l(t[r]);else{if(null==n){var i=document.defaultView;return i&&i.getComputedStyle?n=i.getComputedStyle(e,null):e.currentStyle&&(n=e.currentStyle),null==t?n:n[t]}o[t]=l(n)}},e.intersects=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"touch",o=e.getBoundingClientRect(),r=t.getBoundingClientRect();if("center"===n){var i=r.left+r.width/2,l=r.top+r.height/2;return i>=o.left&&i<=o.right&&l>=o.top&&l<=o.bottom}return"cover"===n?r.left>=o.left&&r.top>=o.top&&r.right<=o.right&&r.bottom<=o.bottom:"touch"===n?o.right>=r.left&&o.left<=r.right&&o.bottom>=r.top&&o.top<=r.bottom:void 0},e.selectAll=function(e){Array.isArray(e)||(e=[e]);var t=[],n=!0,o=!1,r=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var a=i.value;t.push(...document.querySelectorAll(a))}}catch(e){o=!0,r=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw r}}return t},e.eventPath=function(e){var t=e.path||e.composedPath&&e.composedPath();if(t)return t;var n=e.target.parentElement;for(t=[e.target,n];n=n.parentElement;)t.push(n);return t.push(document,window),t},e.removeElement=function(e,t){var n=e.indexOf(t);~n&&e.splice(n,1)},e.simplifyEvent=function(e){var t=e.touches&&e.touches[0]||e;return{tap:t,x:t.clientX,y:t.clientY,target:t.target}},e.off=e.on=void 0;var r=o.bind(null,"addEventListener");e.on=r;var i=o.bind(null,"removeEventListener");e.off=i;var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px";return"number"==typeof e?e+t:""+e}})?o.apply(t,[t]):o)||(e.exports=r)}])});