/*! Selectionjs 1.7.1 MIT | https://github.com/Simonwep/selection */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Selection=t():e.Selection=t()}(self,(function(){return(()=>{"use strict";var e={380:(e,t,o)=>{function n(e,t,o,n,r={}){t instanceof HTMLCollection||t instanceof NodeList?t=Array.from(t):Array.isArray(t)||(t=[t]),Array.isArray(o)||(o=[o]);for(const s of t)for(const t of o)s[e](t,n,{capture:!1,...r});return Array.prototype.slice.call(arguments,1)}o.d(t,{default:()=>y});const r=n.bind(null,"addEventListener"),s=n.bind(null,"removeEventListener"),l=(e,t="px")=>"number"==typeof e?e+t:e;function c(e,t,o){const n=e&&e.style;if(n)if("object"==typeof t)for(const[e,o]of Object.entries(t))n[e]=l(o);else o&&"string"==typeof t&&(n[t]=l(o))}function i(e,t,o){switch(o||"touch"){case"center":{const o=t.left+t.width/2,n=t.top+t.height/2;return o>=e.left&&o<=e.right&&n>=e.top&&n<=e.bottom}case"cover":return t.left>=e.left&&t.top>=e.top&&t.right<=e.right&&t.bottom<=e.bottom;case"touch":return e.right>=t.left&&e.left<=t.right&&e.bottom>=t.top&&e.top<=t.bottom;default:throw new Error("Unkown intersection mode: "+o)}}function a(e,t=document){Array.isArray(e)||(e=[e]);const o=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];"string"==typeof r?o.push(...t.querySelectorAll(r)):r instanceof t.defaultView.HTMLElement&&o.push(r)}return o}function u(e){let t=e.path||e.composedPath&&e.composedPath();if(t&&t.length>0)return t;let o=e.target;for(t=[o];o=o.parentElement;)t.push(o);return t.push(document,window),t}function d(e,t){const o=e.indexOf(t);~o&&e.splice(o,1)}function f(e){const t=e.touches&&e.touches[0]||e;return{tap:t,x:t.clientX,y:t.clientY,target:t.target}}const{abs:m,max:p,min:h,round:v,ceil:_}=Math,b=e=>e.preventDefault(),w=void 0===window.DOMRect?window.ClientRect:window.DOMRect;function g(e={}){const t={options:Object.assign({class:"selection-area",frame:document,mode:"touch",tapMode:"native",startThreshold:10,singleClick:!0,disableTouch:!1,selectables:[],scrollSpeedDivider:10,manualScrollSpeed:750,startareas:["html"],boundaries:["html"],selectionAreaContainer:"body"},e),t:[],l:[],i:[],u:{added:[],removed:[]},m:{beforestart:[],start:[],move:[],stop:[]},p:null,h:null,v:null,_:!0,g:{x:null,y:null},S(){const{frame:e}=t.options;t.p=e.createElement("div"),t.v=e.createElement("div"),t.v.appendChild(t.p),t.p.classList.add(t.options.class),c(t.p,{willChange:"top, left, bottom, right, width, height",top:0,left:0,position:"fixed"}),c(t.v,{overflow:"hidden",position:"fixed",transform:"translate3d(0, 0, 0)",pointerEvents:"none",zIndex:"1"}),t.enable()},T(e){const{frame:o}=t.options,n="on"===e?r:s;n(o,"mousedown",t.A),t.options.disableTouch||n(o,"touchstart",t.A,{passive:!1})},A(e,o=!1){const{x:n,y:s,target:l}=f(e),{startareas:c,boundaries:d,frame:m}=t.options,p=l.getBoundingClientRect(),h=a(c,m);t.j=a(d,m),t.L=t.j.find((e=>i(e.getBoundingClientRect(),p)));const v=u(e);t.L&&h.find((e=>v.includes(e)))&&t.j.find((e=>v.includes(e)))&&(o||!1!==t.M("beforestart",e))&&(t.k=n,t.C=s,t.D=0,t.O=0,t.F=!0,t.clearSelection(!1),r(m,"selectstart",b),r(m,["touchmove","mousemove"],t.H,{passive:!1}),r(m,["mouseup","touchcancel","touchend"],t.R),e.preventDefault())},q(e){const{tapMode:o}=t.options,n=f(e);let r=null;if("native"===o)r=n.target;else{if("touch"!==o)throw new Error("Unknown tapMode option: "+o);{t.resolveSelectables();const{x:e,y:o}=n;r=t.l.find((t=>{const{right:n,left:r,top:s,bottom:l}=t.getBoundingClientRect();return e<n&&e>r&&o<l&&o>s}))}}if(!r)return!1;for(t.resolveSelectables();!t.l.includes(r);){if(!r.parentElement)return;r=r.parentElement}t.M("start",e);const s=t.t;if(e.shiftKey&&s.length){const o=s[s.length-1],[n,l]=4&o.compareDocumentPosition(r)?[r,o]:[o,r],c=[...t.l.filter((e=>4&e.compareDocumentPosition(n)&&2&e.compareDocumentPosition(l))),r];t.select(c),t.M("move",e),t.M("stop",e)}else t.t.includes(r)?t.removeFromSelection(r):t.select(r),t.M("move",e),t.M("stop",e)},H(e){const{x:o,y:n}=f(e),{startThreshold:l,frame:i}=t.options,{k:u,C:d}=t,p=typeof l;if("number"===p&&m(o+n-(u+d))>=l||"object"===p&&m(o-u)>=l.x||m(n-d)>=l.y){s(i,["mousemove","touchmove"],t.H,{passive:!1}),r(i,["mousemove","touchmove"],t.U,{passive:!1}),c(t.p,"display","block"),a(t.options.selectionAreaContainer,i)[0].appendChild(t.v),t.resolveSelectables(),t.F=!1;const o=t.W=t.L.getBoundingClientRect();v(t.L.scrollHeight)!==v(o.height)||v(t.L.scrollWidth)!==v(o.width)?(t._=!0,r(window,"wheel",t.I,{passive:!1}),t.l=t.l.filter((e=>t.L.contains(e))),c(t.v,{top:o.top,left:o.left,width:o.width,height:o.height}),c(t.p,{marginTop:-o.top,marginLeft:-o.left})):(t._=!1,c(t.v,{top:0,left:0,width:"100%",height:"100%"}),c(t.p,{marginTop:0,marginLeft:0})),t.U(e),t.M("start",e)}e.preventDefault()},U(e){const{x:o,y:n}=f(e),{scrollSpeedDivider:r}=t.options,s=t.L;let l=t.g;t.D=o,t.O=n,!t._||null===l.y&&null===l.x?(t.N(),t.P(),t.M("move",e),t.B()):requestAnimationFrame((function o(){l=t.g;const n=null!==l.y,c=null!==l.x;if(!n&&!c)return;const{scrollTop:i,scrollLeft:a}=s;n&&(s.scrollTop+=_(l.y/r),t.C-=s.scrollTop-i),c&&(s.scrollLeft+=_(l.x/r),t.k-=s.scrollLeft-a),t.N(),t.P(),t.M("move",e),t.B(),requestAnimationFrame(o)})),e.preventDefault()},I(e){const{manualScrollSpeed:o}=t.options,n=e.deltaY?e.deltaY>0?1:-1:0,r=e.deltaX?e.deltaX>0?1:-1:0;t.g.y+=n*o,t.g.x+=r*o,t.U(e),e.preventDefault()},N(){const{scrollTop:e,scrollHeight:o,clientHeight:n,scrollLeft:r,scrollWidth:s,clientWidth:l}=t.L,c=t.W,i=t.g;let a=t.D,u=t.O;a<c.left?(i.x=r?-m(c.left-a):null,a=c.left):a>c.left+c.width?(i.x=s-r-l?m(c.left+c.width-a):null,a=c.left+c.width):i.x=null,u<c.top?(i.y=e?-m(c.top-u):null,u=c.top):u>c.top+c.height?(i.y=o-e-n?m(c.top+c.height-u):null,u=c.top+c.height):i.y=null;const d=h(t.k,a),f=h(t.C,u),v=p(t.k,a),_=p(t.C,u);t.h=new w(d,f,v-d,_-f)},B(){const{x:e,y:o,width:n,height:r}=t.h,s=t.p.style;s.transform="translate3d("+e+"px,"+o+"px, 0)",s.width=n+"px",s.height=r+"px"},R(e,o){const{frame:n,singleClick:r}=t.options;s(n,["mousemove","touchmove"],t.H),s(n,["touchmove","mousemove"],t.U),s(n,["mouseup","touchcancel","touchend"],t.R),e&&t.F&&r?t.q(e):t.F||o||(t.P(),t.M("stop",e)),t.g={x:null,y:null},s(window,"wheel",t.I),t.v.remove(),s(n,"selectstart",b),c(t.p,"display","none")},P(){const{i:e,l:o,options:n,h:r}=t,{mode:s}=n,l=[],c=[],a=[];for(let t=0;t<o.length;t++){const n=o[t];i(r,n.getBoundingClientRect(),s)&&(e.includes(n)||c.push(n),l.push(n))}for(let t=0;t<e.length;t++){const o=e[t];l.includes(o)||a.push(o)}t.i=l,t.u={added:c,removed:a}},M(e,o){let n=!0;for(const r of t.m[e])n=r.call(t,{inst:t,area:t.p,selected:t.i.concat(t.t),changed:t.u,oe:o})&&n;return n},trigger(e,o=!0){t.A(e,o)},on:(e,o)=>(t.m[e].push(o),t),off(e,o){const n=t.m[e];if(n){const e=n.indexOf(o);~e&&n.splice(e,1)}return t},resolveSelectables(){t.l=a(t.options.selectables,t.options.frame)},keepSelection(){const{i:e,t:o}=t;for(let t=0;t<e.length;t++){const n=e[t];o.includes(n)||o.push(n)}},clearSelection(e=!0){e&&(t.t=[]),t.i=[],t.u.added=[],t.u.removed=[]},removeFromSelection(e){t.u.removed.push(e),d(t.t,e),d(t.i,e)},getSelection:()=>t.t,cancel(e=!1){t.R(null,!e)},option(e,o){const{options:n}=t;return void 0===o?n[e]:n[e]=o},disable(){t.T("off")},destroy(){t.disable(),t.v.remove()},enable(){t.T("on")},select(e,o=!1){const{u:n,i:r,t:s,options:l}=t,c=a(e,l.frame).filter((e=>!r.includes(e)&&!s.includes(e)));return r.push(...c),n.added.push(...c),t.M("move",null),c}};return t.S(),t}g.utils={on:r,off:s,css:c,intersects:i,selectAll:a,eventPath:u,removeElement:d},g.create=e=>g(e),g.version="1.7.1";const y=g}},t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}return o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o(380)})().default}));
//# sourceMappingURL=selection.min.js.map