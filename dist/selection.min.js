var Selection=function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="dist/",n(n.s=2)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t};function s(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}e.on=function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t.addEventListener(e,n,i({capture:r},o))},e.off=function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t.removeEventListener(e,n,i({capture:r},o))},e.css=function(t,e,n){var i=t&&t.style;if(i)if("object"===(void 0===e?"undefined":o(e))){var s=Object.getOwnPropertyNames(e),r=!0,c=!1,l=void 0;try{for(var u,h=s[Symbol.iterator]();!(r=(u=h.next()).done);r=!0){var d=u.value,f=e[d];i[d]=f+("string"==typeof f?"":"px")}}catch(t){c=!0,l=t}finally{try{!r&&h.return&&h.return()}finally{if(c)throw l}}}else{if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,null):t.currentStyle&&(n=t.currentStyle),void 0===prop?n:n[e];if(e in i)i[e]=n+("string"==typeof n?"":"px");else{var p=!0,m=!1,v=void 0;try{for(var _,y=a[Symbol.iterator]();!(p=(_=y.next()).done);p=!0){var g=_.value;i[g+e]=n+("string"==typeof n?"":"px")}}catch(t){m=!0,v=t}finally{try{!p&&y.return&&y.return()}finally{if(m)throw v}}}}},e.intersects=function(t,e){var n=t.getBoundingClientRect(),o=e.getBoundingClientRect();return n.left+n.width>=o.left&&n.left<=o.left+o.width&&n.top+n.height>=o.top&&n.top<=o.top+o.height},e.selectAll=function(t){Array.isArray(t)||(t=[t]);var e=[],n=!0,o=!1,i=void 0;try{for(var r,a=t[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var c=r.value;e.push.apply(e,s(document.querySelectorAll(c)))}}catch(t){o=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}return e},e.eventPath=function(t){var e=t.path||t.composedPath&&t.composedPath();if(e)return e;var n=t.target.parentElement;for(e=[t.target];n;n=n.parentElement)e.push(n);return e.push(document,window),e},e.removeElement=function(t,e){var n=t.indexOf(e);~n&&t.splice(n,1)};var r=!1,a=["-moz-","-ms-","-o-","-webkit-"]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispatchFilterEvent=function(t,e,n){var o=t.options[e];if("function"==typeof o){var i={selection:t,eventName:e,element:n};return o.call(t,i)}},e.dispatchEvent=function(t,e,n,o,i,s){var r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},a=t.options[e];if("function"==typeof a){var c={selection:t,eventName:e,areaElement:n,selectedElements:i,changedElements:s,originalEvent:o};for(var l in r)c[l]=r[l];return a.call(t,c)}}},function(t,e,n){"use strict";var o=s(n(1)),i=s(n(0));function s(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var r=Math.abs,a=Math.max,c=Math.min,l=function(t){return t.preventDefault()};function u(){var t;for(var e in this.options=Object.assign({class:"selection-area",startThreshold:10,singleClick:!0,disableTouch:!1,containers:[],selectables:[],startareas:["html"],boundaries:["html"]},options),this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this));this._selectedStore=[],this.areaElement=(t=document.createElement("div"),document.body.appendChild(t),i.css(t,{top:0,left:0,position:"fixed"}),t),i.on(document,"mousedown",this._onTapStart),this.options.disableTouch||i.on(document,"touchstart",this._onTapStart,{passive:!1})}u.prototype={constructor:u,_onTapStart:function(t){var e=this,n=t.touches&&t.touches[0],o=(n||t).target,s=i.selectAll(this.options.startareas);this._boundaries=i.selectAll(this.options.boundaries);var r=i.eventPath(t);if(s.find(function(t){return r.includes(t)})&&this._boundaries.find(function(t){return r.includes(t)})){this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,this._singleClick=!0;var a=i.selectAll(this.options.containers);this._selectables=i.selectAll(this.options.selectables),a.forEach(function(t){var n;return(n=e._selectables).push.apply(n,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t.getElementsByTagName("*")))}),this._targetBoundary=this._boundaries.find(function(t){return i.intersects(t,o)}).getBoundingClientRect(),this._touchedElements=[],this._changedElements={added:[],removed:[]},this.areaElement.classList.add(this.options.class),document.addEventListener("selectstart",l),i.on(document,"mousemove",this._delayedTapMove),i.on(document,"touchmove",this._delayedTapMove,{passive:!1}),i.on(document,"mouseup",this._onTapStop),i.on(document,"touchcancel",this._onTapStop),i.on(document,"touchend",this._onTapStop),t.preventDefault()}},_onSingleTap:function(t){var e=(t.touches&&t.touches[0]||t).target;if(this._selectables.includes(e)){this._touchedElements.push(e);var n=this._selectedStore,i=this._changedElements;o.dispatchEvent(this,"onSelect",this.areaElement,t,n,i,{target:e})}},_delayedTapMove:function(t){var e=t.touches&&t.touches[0],n=(e||t).clientX,s=(e||t).clientY;if(r(n+s-(this._lastX+this._lastY))>=this.options.startThreshold){i.off(document,"mousemove",this._delayedTapMove),i.off(document,"touchmove",this._delayedTapMove),i.on(document,"mousemove",this._onTapMove),i.on(document,"touchmove",this._onTapMove),i.css(this.areaElement,"display","block"),this._updateArea(t);var a=this._touchedElements.concat(this._selectedStore),c=this._changedElements;o.dispatchEvent(this,"onStart",this.areaElement,t,a,c),this._singleClick=!1}},_onTapMove:function(t){this._updateArea(t),this._updatedTouchingElements();var e=this._touchedElements.concat(this._selectedStore),n=this._changedElements;o.dispatchEvent(this,"onMove",this.areaElement,t,e,n)},_updateArea:function(t){var e=this._targetBoundary,n=t.touches&&t.touches[0],o=(n||t).clientX,s=(n||t).clientY;o<e.left&&(o=e.left),s<e.top&&(s=e.top),o>e.left+e.width&&(o=e.left+e.width),s>e.top+e.height&&(s=e.top+e.height);var r=c(this._lastX,o),l=c(this._lastY,s),u=a(this._lastX,o),h=a(this._lastY,s);i.css(this.areaElement,{top:l,left:r,width:u-r,height:h-l})},_onTapStop:function(t,e){if(i.off(document,"mousemove",this._delayedTapMove),i.off(document,"touchmove",this._delayedTapMove),i.off(document,"mousemove",this._onTapMove),i.off(document,"touchmove",this._onTapMove),i.off(document,"mouseup",this._onTapStop),i.off(document,"touchcancel",this._onTapStop),i.off(document,"touchend",this._onTapStop),this._singleClick)this._onSingleTap(t);else if(!e){this._updatedTouchingElements();var n=this._touchedElements.concat(this._selectedStore),s=this._changedElements;o.dispatchEvent(this,"onStop",this.areaElement,t,n,s)}document.removeEventListener("selectstart",l),i.css(this.areaElement,"display","none")},_updatedTouchingElements:function(){var t=this,e=[],n={added:[],removed:[]},s=function(s){!1!==o.dispatchFilterEvent(t,"selectionFilter",s)&&i.intersects(t.areaElement,s)&&(t._touchedElements.includes(s)||n.added.push(s),e.push(s))}.bind(this);this._selectables.forEach(s);for(var r=this._touchedElements,a=r.length-1;a>=0;a--){var c=r[a];e.includes(c)||n.removed.push(c)}this._touchedElements=e,this._changedElements=n},keepSelection:function(){var t=this,e=this._touchedElements.filter(function(e){return!t._selectedStore.includes(e)});this._selectedStore=e.concat(this._selectedStore)},clearSelection:function(){this._selectedStore=[]},removeFromSelection:function(t){i.removeElement(this._selectedStore,t),i.removeElement(this._touchedElements,t)},cancel:function(t){this._onTapStop(null,!t)},option:function(t,e){var n=this.options;return void 0===e?n[t]:n[t]=e},disable:function(){i.off(document,"mousedown",this._onTapStart)},enable:function(){i.on(document,"mousedown",this._onTapStart)}},u.utils={on:i.on,off:i.off,css:i.css,intersects:i.intersects,selectAll:i.selectAll,eventPath:i.eventPath,removeElement:i.removeElement},u.create=function(t){return new u(t)},u.version="0.0.9",t.exports=u}]);