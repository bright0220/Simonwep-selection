!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Selection=t():e.Selection=t()}(window,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="dist/",n(n.s=0)}([function(e,t,n){var o,r,l;r=[n(1)],void 0===(l="function"==typeof(o=function(t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}(t);var o=Math.abs,r=Math.max,l=Math.min,a=Math.round,i=document,c=e=>e.preventDefault();function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s={options:Object.assign({class:"selection-area",mode:"touch",startThreshold:10,singleClick:!0,disableTouch:!1,validateStart:()=>!0,containers:[],selectables:[],scrollSpeedDivider:10,startareas:["html"],boundaries:["html"]},e),_selectedStore:[],_areaElement:i.createElement("div"),_clippingElement:i.createElement("div"),_scrollAvailable:!0,_scrollSpeed:null,_scrollActive:!1,_init(){s._clippingElement.appendChild(s._areaElement),i.body.appendChild(s._clippingElement),t.css(s._areaElement,{top:0,left:0,position:"fixed"}),t.css(s._clippingElement,{overflow:"hidden",position:"fixed",transform:"translate3d(0, 0, 0)","pointer-events":"none"}),s.enable()},_bindStartEvents(e){t[e](i,"mousedown",s._onTapStart),s.options.disableTouch||t[e](i,"touchstart",s._onTapStart,{passive:!1})},_onTapStart(e){var n=t.simplifyEvent(e),o=n.x,r=n.y,l=n.target,u=l.getBoundingClientRect();if(s.options.validateStart(e)){var d=t.selectAll(s.options.startareas);s._boundaries=t.selectAll(s.options.boundaries);var p=t.eventPath(e);if(d.find(e=>p.includes(e))&&s._boundaries.find(e=>p.includes(e))){s._areaX1=o,s._areaY1=r,s._areaX2=0,s._areaY2=0,s._singleClick=!0;var f=t.selectAll(s.options.containers);s._selectables=t.selectAll(s.options.selectables),f.forEach(e=>s._selectables.push(...e.querySelectorAll("*"))),s._targetContainer=s._boundaries.find(e=>t.intersects(e.getBoundingClientRect(),u)),s._targetBoundary=s._targetContainer.getBoundingClientRect(),s._touchedElements=[],s._changedElements={added:[],removed:[]},a(s._targetContainer.scrollHeight)!==a(s._targetBoundary.height)?(s._scrollAvailable=!0,t.on(window,"wheel",s._manualScroll),s._selectables=s._selectables.filter(e=>s._targetContainer.contains(e)),t.css(s._clippingElement,{top:s._targetBoundary.top,left:s._targetBoundary.left,width:s._targetBoundary.width,height:s._targetBoundary.height}),t.css(s._areaElement,{"margin-top":-s._targetBoundary.top,"margin-left":-s._targetBoundary.left})):(s._scrollAvailable=!1,t.css(s._clippingElement,{top:0,left:0,width:"100%",height:"100%"}),t.css(s._areaElement,{"margin-top":0,"margin-left":0})),s._areaElement.classList.add(s.options.class),t.on(i,"selectstart",c),t.on(i,"mousemove",s._delayedTapMove),t.on(i,"touchmove",s._delayedTapMove,{passive:!1}),t.on(i,["mouseup","touchcancel","touchend"],s._onTapStop),e.preventDefault()}}},_onSingleTap(e){for(var n=t.simplifyEvent(e),o=n.target;!s._selectables.includes(o);){if(!o.parentElement)return;o=o.parentElement}s._touchedElements.push(o),s._dispatchEvent("onSelect",e,{target:o})},_delayedTapMove(e){var n=t.simplifyEvent(e),r=n.x,l=n.y;o(r+l-(s._areaX1+s._areaY1))>=s.options.startThreshold&&(t.off(i,["mousemove","touchmove"],s._delayedTapMove),t.on(i,["mousemove","touchmove"],s._onTapMove),t.css(s._areaElement,"display","block"),s._onTapMove(e),s._dispatchEvent("onStart",e),s._singleClick=!1)},_onTapMove(e){var n=t.simplifyEvent(e),o=n.x,r=n.y;if(s._areaX2=o,s._areaY2=r,s._scrollAvailable&&!s._scrollActive&&null!==s._scrollSpeed){var l=s._targetContainer;s._scrollActive=!0,requestAnimationFrame(function t(){if(null===s._scrollSpeed)return s._scrollActive=!1;var n=l.scrollTop;l.scrollTop+=Math.ceil(s._scrollSpeed/s.options.scrollSpeedDivider),s._areaY1-=l.scrollTop-n,s._redrawArea(),s._updatedTouchingElements(),s._dispatchEvent("onMove",e),requestAnimationFrame(t)})}else s._redrawArea(),s._updatedTouchingElements(),s._dispatchEvent("onMove",e)},_manualScroll(e){s._scrollSpeed+=s.options.scrollSpeedDivider*(-1*e.wheelDelta),s._onTapMove(e),e.preventDefault()},_redrawArea(){var e=s._targetBoundary,n=s._areaX2,o=s._areaY2;n<e.left?n=e.left:n>e.left+e.width&&(n=e.left+e.width),o<e.top?(s._scrollSpeed=-Math.abs(e.top-o),o=e.top):o>e.top+e.height?(s._scrollSpeed=Math.abs(e.top+e.height-o),o=e.top+e.height):s._scrollSpeed=null;var a=l(s._areaX1,n),i=l(s._areaY1,o),c=r(s._areaX1,n),u=r(s._areaY1,o);t.css(s._areaElement,{top:i,left:a,width:c-a,height:u-i})},_onTapStop(e,n){t.off(i,["mousemove","touchmove"],s._delayedTapMove),t.off(i,["touchmove","mousemove"],s._onTapMove),t.off(i,["mouseup","touchcancel","touchend"],s._onTapStop),s._singleClick&&s.options.singleClick?s._onSingleTap(e):n||(s._updatedTouchingElements(),s._dispatchEvent("onStop",e)),s._scrollSpeed=null,t.off(window,"wheel",s._manualScroll),t.off(i,"selectstart",c),t.css(s._areaElement,"display","none")},_updatedTouchingElements(){for(var e,n=[],o={added:[],removed:[]},r=s.options.mode,l=s._selectables,a=s._areaElement.getBoundingClientRect(),i=0,c=l.length;e=l[i],i<c;i++)t.intersects(a,e.getBoundingClientRect(),r)&&!1!==s._dispatchFilterEvent("selectionFilter",e)&&(s._touchedElements.includes(e)||o.added.push(e),n.push(e));for(var u,d=0,p=s._touchedElements.length;u=s._touchedElements[d],d<p;d++)n.includes(u)||o.removed.push(u);s._touchedElements=n,s._changedElements=o},_dispatchFilterEvent(e,t){var n=s.options[e];if("function"==typeof n)return n.call(s,{selection:s,eventName:e,element:t})},_dispatchEvent(e,t,o){var r=s.options[e];if("function"==typeof r)return r.call(s,function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),r.forEach(function(t){n(e,t,o[t])})}return e}({selection:s,areaElement:s._areaElement,selectedElements:s._touchedElements.concat(s._selectedStore),changedElements:s._changedElements,eventName:e,originalEvent:t},o))},keepSelection(){for(var e,t=0,n=s._touchedElements.length;e=s._touchedElements[t],t<n;t++)s._selectedStore.includes(e)||s._selectedStore.push(e)},clearSelection(){s._selectedStore=[]},removeFromSelection(e){t.removeElement(s._selectedStore,e),t.removeElement(s._touchedElements,e)},getSelection:()=>s._selectedStore,cancel(e){s._onTapStop(null,!e)},option(e,t){var n=s.options;return null==t?n[e]:n[e]=t},disable(){s._bindStartEvents("off")},destroy(){s.disable(),i.body.removeChild(s._clippingElement)},enable(){s._bindStartEvents("on")}};return s._init(),s}s.utils={on:t.on,off:t.off,css:t.css,intersects:t.intersects,selectAll:t.selectAll,eventPath:t.eventPath,removeElement:t.removeElement},s.create=(e=>new s(e)),s.version="0.1.4",e.exports=s})?o.apply(t,r):o)||(e.exports=l)},function(e,t,n){var o,r,l;r=[t],void 0===(l="function"==typeof(o=function(e){"use strict";function t(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),r.forEach(function(t){n(e,t,o[t])})}return e}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,n,o,r){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};n instanceof HTMLCollection||n instanceof NodeList?n=Array.from(n):Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);var a=!0,i=!1,c=void 0;try{for(var s,u=n[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value,p=!0,f=!1,v=void 0;try{for(var _,m=o[Symbol.iterator]();!(p=(_=m.next()).done);p=!0){var h=_.value;d[e](h,r,t({capture:!1},l))}}catch(e){f=!0,v=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw v}}}}catch(e){i=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(i)throw c}}return Array.prototype.slice.call(arguments,1)}Object.defineProperty(e,"__esModule",{value:!0}),e.css=function(e,t,n){var o=e&&e.style;if(o)if("object"==typeof t)for(var r in t)o[r]=a(t[r]);else{if(null==n){var l=document.defaultView;return l&&l.getComputedStyle?n=l.getComputedStyle(e,null):e.currentStyle&&(n=e.currentStyle),null==t?n:n[t]}o[t]=a(n)}},e.intersects=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"touch";if("center"===n){var o=t.left+t.width/2,r=t.top+t.height/2;return o>=e.left&&o<=e.right&&r>=e.top&&r<=e.bottom}return"cover"===n?t.left>=e.left&&t.top>=e.top&&t.right<=e.right&&t.bottom<=e.bottom:"touch"===n?e.right>=t.left&&e.left<=t.right&&e.bottom>=t.top&&e.top<=t.bottom:void 0},e.selectAll=function(e){Array.isArray(e)||(e=[e]);var t=[],n=!0,o=!1,r=void 0;try{for(var l,a=e[Symbol.iterator]();!(n=(l=a.next()).done);n=!0){var i=l.value;t.push(...document.querySelectorAll(i))}}catch(e){o=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw r}}return t},e.eventPath=function(e){var t=e.path||e.composedPath&&e.composedPath();if(t)return t;var n=e.target.parentElement;for(t=[e.target,n];n=n.parentElement;)t.push(n);return t.push(document,window),t},e.removeElement=function(e,t){var n=e.indexOf(t);~n&&e.splice(n,1)},e.simplifyEvent=function(e){var t=e.touches&&e.touches[0]||e;return{tap:t,x:t.clientX,y:t.clientY,target:t.target}},e.off=e.on=void 0;var r=o.bind(null,"addEventListener");e.on=r;var l=o.bind(null,"removeEventListener");e.off=l;var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px";return"number"==typeof e?e+t:""+e}})?o.apply(t,r):o)||(e.exports=l)}])});
//# sourceMappingURL=selection.min.js.map