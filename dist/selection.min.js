!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Selection=t():e.Selection=t()}(window,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="dist/",n(n.s=0)}([function(e,t,n){var o,r,l;r=[n(1)],void 0===(l="function"==typeof(o=function(t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,t}(t);var o=Math.abs,r=Math.max,l=Math.min,a=document,i=e=>e.preventDefault();function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c={options:Object.assign({class:"selection-area",mode:"touch",startThreshold:10,singleClick:!0,disableTouch:!1,validateStart:()=>!0,containers:[],selectables:[],startareas:["html"],boundaries:["html"]},e),_selectedStore:[],_areaElement:a.createElement("div"),_init(){a.body.appendChild(c._areaElement),t.css(c._areaElement,{top:0,left:0,position:"fixed"}),c.enable()},_bindStartEvents(e){t[e](a,"mousedown",c._onTapStart),c.options.disableTouch||t[e](a,"touchstart",c._onTapStart,{passive:!1})},_onTapStart(e){var n=t.simplifyEvent(e),o=n.x,r=n.y,l=n.target;if(c.options.validateStart(e)){var s=t.selectAll(c.options.startareas);c._boundaries=t.selectAll(c.options.boundaries);var u=t.eventPath(e);if(s.find(e=>u.includes(e))&&c._boundaries.find(e=>u.includes(e))){c._lastX=o,c._lastY=r,c._singleClick=!0;var d=t.selectAll(c.options.containers);c._selectables=t.selectAll(c.options.selectables),d.forEach(e=>c._selectables.push(...e.querySelectorAll("*"))),c._targetBoundary=c._boundaries.find(e=>t.intersects(e,l)).getBoundingClientRect(),c._touchedElements=[],c._changedElements={added:[],removed:[]},c._areaElement.classList.add(c.options.class),t.on(a,"selectstart",i),t.on(a,"mousemove",c._delayedTapMove),t.on(a,"touchmove",c._delayedTapMove,{passive:!1}),t.on(a,["mouseup","touchcancel","touchend"],c._onTapStop),e.preventDefault()}}},_onSingleTap(e){for(var n=t.simplifyEvent(e),o=n.target;!c._selectables.includes(o);){if(!o.parentElement)return;o=o.parentElement}c._touchedElements.push(o),c._dispatchEvent("onSelect",e,{target:o})},_delayedTapMove(e){var n=t.simplifyEvent(e),r=n.x,l=n.y;o(r+l-(c._lastX+c._lastY))>=c.options.startThreshold&&(t.off(a,["mousemove","touchmove"],c._delayedTapMove),t.on(a,["mousemove","touchmove"],c._onTapMove),t.css(c._areaElement,"display","block"),c._updateArea(e),c._dispatchEvent("onStart",e),c._singleClick=!1)},_onTapMove(e){c._updateArea(e),c._updatedTouchingElements(),c._dispatchEvent("onMove",e)},_updateArea(e){var n=c._targetBoundary,o=t.simplifyEvent(e),a=o.x,i=o.y;a<n.left&&(a=n.left),i<n.top&&(i=n.top),a>n.left+n.width&&(a=n.left+n.width),i>n.top+n.height&&(i=n.top+n.height);var s=l(c._lastX,a),u=l(c._lastY,i),d=r(c._lastX,a),f=r(c._lastY,i);t.css(c._areaElement,{top:u,left:s,width:d-s,height:f-u})},_onTapStop(e,n){t.off(a,["mousemove","touchmove"],c._delayedTapMove),t.off(a,["touchmove","mousemove"],c._onTapMove),t.off(a,["mouseup","touchcancel","touchend"],c._onTapStop),c._singleClick&&c.options.singleClick?c._onSingleTap(e):n||(c._updatedTouchingElements(),c._dispatchEvent("onStop",e)),t.off(a,"selectstart",i),t.css(c._areaElement,"display","none")},_updatedTouchingElements(){for(var e=[],n={added:[],removed:[]},o=0,r=c._selectables.length;o<r;o++){var l=c._selectables[o];t.intersects(c._areaElement,l,c.options.mode)&&!1!==c._dispatchFilterEvent("selectionFilter",l)&&(c._touchedElements.includes(l)||n.added.push(l),e.push(l))}for(var a,i=0,s=c._touchedElements.length;a=c._touchedElements[i],i<s;i++)e.includes(a)||n.removed.push(a);c._touchedElements=e,c._changedElements=n},_dispatchFilterEvent(e,t){var n=c.options[e];if("function"==typeof n)return n.call(c,{selection:c,eventName:e,element:t})},_dispatchEvent(e,t,o){var r=c.options[e];if("function"==typeof r)return r.call(c,function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),r.forEach(function(t){n(e,t,o[t])})}return e}({selection:c,areaElement:c._areaElement,selectedElements:c._touchedElements.concat(c._selectedStore),changedElements:c._changedElements,eventName:e,originalEvent:t},o))},keepSelection(){for(var e,t=0,n=c._touchedElements.length;e=c._touchedElements[t],t<n;t++)c._selectedStore.includes(e)||c._selectedStore.push(e)},clearSelection(){c._selectedStore=[]},removeFromSelection(e){t.removeElement(c._selectedStore,e),t.removeElement(c._touchedElements,e)},getSelection:()=>c._selectedStore,cancel(e){c._onTapStop(null,!e)},option(e,t){var n=c.options;return null==t?n[e]:n[e]=t},disable(){c._bindStartEvents("off")},destroy(){c.disable(),a.body.removeChild(c._areaElement)},enable(){c._bindStartEvents("on")}};return c._init(),c}c.utils={on:t.on,off:t.off,css:t.css,intersects:t.intersects,selectAll:t.selectAll,eventPath:t.eventPath,removeElement:t.removeElement},c.create=(e=>new c(e)),c.version="0.1.4",e.exports=c})?o.apply(t,r):o)||(e.exports=l)},function(e,t,n){var o,r,l;r=[t],void 0===(l="function"==typeof(o=function(e){"use strict";function t(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),r.forEach(function(t){n(e,t,o[t])})}return e}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,n,o,r){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};n instanceof HTMLCollection||n instanceof NodeList?n=Array.from(n):Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);var a=!0,i=!1,c=void 0;try{for(var s,u=n[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value,f=!0,p=!1,v=void 0;try{for(var m,h=o[Symbol.iterator]();!(f=(m=h.next()).done);f=!0){var y=m.value;d[e](y,r,t({capture:!1},l))}}catch(e){p=!0,v=e}finally{try{f||null==h.return||h.return()}finally{if(p)throw v}}}}catch(e){i=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(i)throw c}}return Array.prototype.slice.call(arguments,1)}Object.defineProperty(e,"__esModule",{value:!0}),e.css=function(e,t,n){var o=e&&e.style;if(o)if("object"==typeof t)for(var r in t)o[r]=a(t[r]);else{if(null==n){var l=document.defaultView;return l&&l.getComputedStyle?n=l.getComputedStyle(e,null):e.currentStyle&&(n=e.currentStyle),null==t?n:n[t]}o[t]=a(n)}},e.intersects=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"touch",o=e.getBoundingClientRect(),r=t.getBoundingClientRect();if("center"===n){var l=r.left+r.width/2,a=r.top+r.height/2;return l>=o.left&&l<=o.right&&a>=o.top&&a<=o.bottom}return"cover"===n?r.left>=o.left&&r.top>=o.top&&r.right<=o.right&&r.bottom<=o.bottom:"touch"===n?o.right>=r.left&&o.left<=r.right&&o.bottom>=r.top&&o.top<=r.bottom:void 0},e.selectAll=function(e){Array.isArray(e)||(e=[e]);var t=[],n=!0,o=!1,r=void 0;try{for(var l,a=e[Symbol.iterator]();!(n=(l=a.next()).done);n=!0){var i=l.value;t.push(...document.querySelectorAll(i))}}catch(e){o=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw r}}return t},e.eventPath=function(e){var t=e.path||e.composedPath&&e.composedPath();if(t)return t;var n=e.target.parentElement;for(t=[e.target,n];n=n.parentElement;)t.push(n);return t.push(document,window),t},e.removeElement=function(e,t){var n=e.indexOf(t);~n&&e.splice(n,1)},e.simplifyEvent=function(e){var t=e.touches&&e.touches[0]||e;return{tap:t,x:t.clientX,y:t.clientY,target:t.target}},e.off=e.on=void 0;var r=o.bind(null,"addEventListener");e.on=r;var l=o.bind(null,"removeEventListener");e.off=l;var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px";return"number"==typeof e?e+t:""+e}})?o.apply(t,r):o)||(e.exports=l)}])});
//# sourceMappingURL=selection.min.js.map